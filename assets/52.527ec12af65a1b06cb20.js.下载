(window.webpackJsonp=window.webpackJsonp||[]).push([[52],{715:function(t,e,o){"use strict";o.r(e);var a={name:"GoogleAd",components:{},data:function(){return{}},computed:{},watch:{},created:function(){},mounted:function(){},methods:{}},s=o(20),i=Object(s.a)(a,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"googleAd",staticStyle:{height:"500px",margin:"20px 0"}},[e("adsbygoogle",{attrs:{"ad-slot":"2967039306","ad-format":"auto"}})],1)}),[],!1,null,"2d8f9117",null);e.default=i.exports},718:function(t,e,o){"use strict";o.r(e);o(95),o(391),o(93);var a=o(710),s=o(31),i=o(36);function r(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,a)}return o}var n={name:"TagModal",components:{},props:{visible:{type:Boolean,default:!1},needModule:{type:Boolean,default:!1},tagLimit:{type:Number,default:-1},hasChooseList:{type:Array,default:function(){return[]}}},data:function(){return{activeTabName:"0",tagList:[],chooseList:[],moduleId:""}},fetch:function(){this.$store.dispatch("tag/setModuleList")},computed:function(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?r(Object(o),!0).forEach((function(e){Object(s.a)(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):r(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}({},Object(i.d)("tag",["moduleList"])),watch:{},created:function(){},mounted:function(){this.getList(),this.chooseList=Object(a.a)(this.hasChooseList)},methods:{getList:function(){var t=this;this.$apiRepository.post.getTagsList().then((function(e){t.tagList=e.clazz_tags}))},chooseTag:function(t){return-1!==this.tagLimit&&this.chooseList.length>=this.tagLimit?(this.$message.warning("至多选择5个标签"),!1):!(this.chooseList.filter((function(e){return e.id===t.tag.id})).length>0)&&void this.chooseList.push({id:t.tag.id,tag:t.tag.title})},remove:function(t){this.chooseList.splice(t,1)},confirm:function(){return this.needModule&&""===this.moduleId?(this.$message.warning("请选择发布版块"),!1):0===this.chooseList.length?(this.$message.warning("请选择标签"),!1):(this.$emit("back",{module_id:""!==this.moduleId?this.moduleId:0,tagList:Object(a.a)(this.chooseList)}),void this.close())},close:function(){this.$emit("update:visible",!1)}}},l=o(20),c=Object(l.a)(n,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("el-dialog",{attrs:{visible:t.visible,title:"选择标签",width:"630px","close-on-click-modal":!1,"before-close":t.close,"lock-scroll":!1,"append-to-body":!0},on:{"update:visible":function(e){t.visible=e}}},[o("div",[t.needModule?o("div",{staticClass:"mb-30"},[o("el-select",{attrs:{placeholder:"请选择投放版块"},model:{value:t.moduleId,callback:function(e){t.moduleId=e},expression:"moduleId"}},t._l(t.moduleList,(function(t,e){return o("el-option",{key:e,attrs:{label:t.title,value:t.module_id}})})),1)],1):t._e(),t._v(" "),o("el-tabs",{staticClass:"relative -top-20",model:{value:t.activeTabName,callback:function(e){t.activeTabName=e},expression:"activeTabName"}},t._l(t.tagList,(function(e,a){return o("el-tab-pane",{key:a,attrs:{label:e.clazz,name:""+a}},t._l(e.tags,(function(e,a){return o("el-tag",{key:a,staticClass:"mr-10 mb-10 cursor-pointer",attrs:{effect:"plain"},on:{click:function(o){return t.chooseTag(e)}}},[t._v("\n          "+t._s(e.tag.title)+"\n        ")])})),1)})),1),t._v(" "),t.chooseList.length>0?o("div",[o("div",{staticClass:"text-base text-gray-800 mb-15"},[t._v("已选标签")]),t._v(" "),o("div",{staticClass:"flex flex-row flex-wrap items-center"},t._l(t.chooseList,(function(e,a){return o("el-tag",{key:a,staticClass:"mr-10 mb-10",attrs:{closable:"","disable-transitions":!1},on:{close:function(e){return t.remove(a)}}},[t._v("\n          "+t._s(e.tag)+"\n        ")])})),1)]):t._e()],1),t._v(" "),o("div",{attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.confirm}},[t._v("确认")])],1)])}),[],!1,null,"1af64b92",null);e.default=c.exports},819:function(t,e,o){},907:function(t,e,o){"use strict";o(819)},927:function(t,e,o){"use strict";o.r(e);o(93);var a={name:"AuthorInfo",components:{},props:{authorId:{type:[String,Number],default:""},ifFollow:{type:Boolean,default:!1}},data:function(){return{authorData:{user_id:"",nickname:"",head:"",border:"",credits_score:0,followed:!1,follower:0,following:0},badgesList:[]}},computed:{},watch:{authorId:function(){this.getAuthorInfo()}},created:function(){},mounted:function(){this.getAuthorInfo()},methods:{getAuthorInfo:function(){var t=this;""!==this.authorId&&this.$apiRepository.personal.getUserDetail(this.authorId).then((function(e){t.authorData={user_id:e.user_id,nickname:e.nickname,personal_remark:e.personal_remark,head:e.avatar&&""!==e.avatar?e.avatar:t.$settings.default_head,border:e.in_use_medals.border,credits_score:e.credits_score,followed:t.ifFollow||!1,follower:e.follower>0?e.follower:0,following:e.following>0?e.following:0},t.badgesList=e.in_use_medals?e.in_use_medals.badges:[]})).catch((function(t){}))},follow:function(){var t=this;if(!this.$store.getters.token)return this.$router.push("".concat(this.$settings.routePre,"/login")),!1;var e={action:this.authorData.followed?"unfollow":"follow",target_user_id:this.authorId};this.$apiRepository.personal.operateRelationship(e).then((function(e){t.$set(t.authorData,"followed",!t.authorData.followed)})).catch((function(e){t.$message.error(e.response.data.retMsg||"关注失败")}));var o="follow"===e.action?"post_detail_follow_author":"post_detail_unfollow_author";window.AnalysysAgent.track(o,{author_id:"".concat(this.authorId),post_id:"".concat(this.$route.params.id)})},authorClick:function(){window.AnalysysAgent.track("post_detail_author_click",{author_id:"".concat(this.authorId),post_id:"".concat(this.$route.params.id)})}}},s=(o(907),o(20)),i=Object(s.a)(a,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"author-info-bar"},[o("div",{staticClass:"level-box"},[o("img",{attrs:{src:"https://pic.iyingdi.com/yingdi_pc/static/level/bg_level.png",alt:""}}),t._v(" "),o("span",[t._v("Lv."+t._s(t._f("getUserLevel")(t.authorData.credits_score)))])]),t._v(" "),o("nuxt-link",{staticClass:"user-head",attrs:{tag:"div",to:t.$settings.routePre+"/people/"+t.authorId},nativeOn:{click:function(e){return t.authorClick(e)}}},[""!==t.authorData.head?o("img",{staticClass:"head",attrs:{src:t.authorData.head,alt:""}}):t._e(),t._v(" "),""!==t.authorData.border?o("img",{staticClass:"user-head-border",attrs:{src:t.authorData.border,alt:""}}):t._e()]),t._v(" "),o("div",{staticClass:"user-name"},[t._v(t._s(t.authorData.nickname))]),t._v(" "),""!==t.authorData.personal_remark?o("div",{staticClass:"desc"},[t._v(t._s(t.authorData.personal_remark))]):t._e(),t._v(" "),t.badgesList.length?o("div",{staticClass:"badges"},t._l(t.badgesList,(function(t,e){return o("img",{key:e,attrs:{src:t,alt:""}})})),0):t._e(),t._v(" "),o("el-divider",[t.authorData.followed?o("a",{staticClass:"follow-btn",on:{click:t.follow}},[t._v("已关注")]):o("a",{staticClass:"follow-btn",on:{click:t.follow}},[t._v("+ 关注")])]),t._v(" "),o("div",{staticClass:"fans-and-follows"},[o("div",{staticClass:"fans"},[o("div",[t._v("粉丝")]),o("div",{staticClass:"count"},[t._v(t._s(t.authorData.follower))])]),t._v(" "),o("div",{staticClass:"follows"},[o("div",[t._v("关注")]),o("div",{staticClass:"count"},[t._v(t._s(t.authorData.following))])])])],1)}),[],!1,null,"5512060d",null);e.default=i.exports}}]);