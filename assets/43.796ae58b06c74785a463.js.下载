(window.webpackJsonp=window.webpackJsonp||[]).push([[43],{788:function(t,e,s){},875:function(t,e,s){"use strict";s(788)},957:function(t,e,s){"use strict";s.r(e);s(93),s(96),s(14);var o=s(31),a=s(36);function i(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,o)}return s}var l={name:"People",scrollToTop:!0,asyncData:function(t){var e=t.app,s=t.params;t.error;return e.$apiRepository.personal.getUserDetail(s.id).then((function(t){return{userId:s.id,userDetail:t}})).catch((function(t){return{errMsg:(t.response.data.retMsg&&void 0!==t.response.data.retMsg?t.response.data.retMsg:null)||"用户未找到"}}))},data:function(){return{followDialogVisible:!1,postDialogVisible:!1,followPopTab:0,pageTotal:1,userId:null,userDetail:{background_image:"",credits_score:"",social_accounts:{},avatar:"",nickname:"",personal_remark:"",in_use_medals:{badges:[]},follower:"",following:"",like_total:"",post_total:""}}},computed:function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?i(Object(s),!0).forEach((function(e){Object(o.a)(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):i(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({acountList:function(){return Object.keys(this.userDetail.social_accounts).length<=0?[]:this.userDetail.social_accounts}},Object(a.d)(["userInfo"])),created:function(){this.userInfo.id===Number(this.userId)&&this.$router.push("".concat(this.$settings.routePre,"/acount"))},methods:{openPop:function(t,e){"followpop"===t?(this.followDialogVisible=!0,this.followPopTab=e):"postpop"===t&&(this.postDialogVisible=!0)},handleBlock:function(t){var e=this;if(this.$store.getters.token){var s={target_user_id:this.userId,action:t},o="";switch(t){case"follow":o="user_space_follow_user";break;case"unfollow":o="user_space_pass_user";break;case"block":o="user_space_block_user";break;case"unblock":o="user_space_unblock_user"}window.AnalysysAgent.track(o,{user_id:"".concat(this.userId)}),this.$apiRepository.personal.operateRelationship(s).then((function(s){200===s.status&&("block"===t||"unblock"===t?e.userDetail.is_block=!e.userDetail.is_block:e.userDetail.is_followed=!e.userDetail.is_followed,e.$message({message:"操作成功",type:"success"}))})).catch((function(t){e.$message({message:t.response.data.retMsg,type:"warning"})})).finally((function(t){}))}else this.$router.push("".concat(this.$settings.routePre,"/login"))}}},n=(s(875),s(20)),r=Object(n.a)(l,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"acount-container"},[s("div",{staticClass:"acount-content"},[s("div",{staticClass:"user_box"},[s("person-title",{attrs:{"person-data":t.userDetail}}),t._v(" "),s("div",{staticClass:"user-data "},[s("div",{on:{click:function(e){return t.openPop("followpop",0)}}},[s("span",{staticClass:"num"},[t._v(t._s(t.userDetail.following))]),t._v(" "),s("span",{staticClass:"text"},[t._v("关注")])]),t._v(" "),s("div",{on:{click:function(e){return t.openPop("followpop",1)}}},[s("span",{staticClass:"num"},[t._v(t._s(t.userDetail.follower))]),t._v(" "),s("span",{staticClass:"text"},[t._v("粉丝")])]),t._v(" "),s("div",{on:{click:function(e){return t.openPop("postpop")}}},[s("span",{staticClass:"num"},[t._v(t._s(t.userDetail.post_total))]),t._v(" "),s("span",{staticClass:"text"},[t._v("发帖")])]),t._v(" "),s("div",[s("span",{staticClass:"num"},[t._v(t._s(t.userDetail.like_total))]),t._v(" "),s("span",{staticClass:"text"},[t._v("获赞")])])])],1),t._v(" "),s("div",{staticClass:"people-main w-container m-auto"},[s("div",{staticClass:"main-content w-content float-left"},[s("div",{staticClass:"tab"},[s("ul",[s("router-link",{attrs:{to:t.$settings.routePre+"/people/"+t.userId,tag:"li"}},[s("span",[t._v("Ta的营地")]),t._v(" "),s("i")]),t._v(" "),s("router-link",{attrs:{tag:"li",to:t.$settings.routePre+"/people/"+t.userId+"/fire"}},[s("span",[t._v("Ta的点火")]),t._v(" "),s("i")]),t._v(" "),s("router-link",{attrs:{to:t.$settings.routePre+"/people/"+t.userId+"/postList",tag:"li"}},[s("span",[t._v("Ta的发帖")]),t._v(" "),s("i")]),t._v(" "),s("router-link",{attrs:{tag:"li",to:t.$settings.routePre+"/people/"+t.userId+"/commentList"}},[s("span",[t._v("Ta的评论")]),t._v(" "),s("i")])],1),t._v(" "),s("div",{staticClass:"btns"},[t.userDetail.is_followed?s("span",{on:{click:function(e){return t.handleBlock("unfollow")}}},[t._v("已关注")]):s("span",{staticClass:"active",on:{click:function(e){return t.handleBlock("follow")}}},[t._v("关注")])])]),t._v(" "),s("div",{staticClass:"w-content"},[s("nuxt-child",{attrs:{"person-data":t.userDetail}})],1)]),t._v(" "),s("div",{staticClass:"side-content w-sideBar float-right"},[s("div",{staticClass:"block"},[s("i",{staticClass:"el-icon-document"}),t._v(" "),t.userDetail.is_block?s("span",{on:{click:function(e){return t.handleBlock("unblock")}}},[t._v("已屏蔽")]):s("span",{on:{click:function(e){return t.handleBlock("block")}}},[t._v("屏蔽该用户")])]),t._v(" "),t.acountList.length>0?s("acount-list",{attrs:{"acount-list":t.acountList,title:"Ta的账号"}}):t._e()],1)])]),t._v(" "),t.followDialogVisible?s("follow-pop",{attrs:{id:t.userId,"is-people":!0,"dialog-visible":t.followDialogVisible,"follow-pop-tab":t.followPopTab},on:{"update:dialogVisible":[function(e){t.followDialogVisible=e},function(e){t.followDialogVisible=e}],"update:dialog-visible":function(e){t.followDialogVisible=e},"update:followPopTab":function(e){t.followPopTab=e}}}):t._e()],1)}),[],!1,null,"0e14f2f4",null);e.default=r.exports;installComponents(r,{PersonTitle:s(831).default,AcountList:s(832).default,FollowPop:s(833).default})}}]);